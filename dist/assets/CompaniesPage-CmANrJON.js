import{s as z,j as e}from"./index-BFi3ExnV.js";import{h as B,u as I,r}from"./react-vendor-DAZAlSq7.js";import{S as L,k as R,B as h,h as D,l as P,j as U}from"./icons-CXffLe3G.js";import"./supabase-C47zntBf.js";const q=()=>{const[u]=B(),p=I(),[n,b]=r.useState([]),[l,j]=r.useState([]),[f,m]=r.useState(!0),[x,v]=r.useState(null),[i,y]=r.useState(u.get("search")||""),[o,N]=r.useState("all"),[c,w]=r.useState("all"),[d,S]=r.useState("reviews"),[g,C]=r.useState(!1),_=["All Industries","Technology","Finance","Healthcare","Consulting","E-commerce","Entertainment","Automotive","Retail","Food & Beverage"],k=["All Sizes","1-50 employees","51-200 employees","201-1000 employees","1000+ employees"];r.useEffect(()=>{F()},[]),r.useEffect(()=>{A()},[n,i,o,c,d]);const F=async()=>{try{m(!0);const{data:s,error:a}=await z.from("company_stats").select("*").order("review_count",{ascending:!1});if(a)throw a;b(s||[])}catch(s){v(s.message||"Failed to load companies")}finally{m(!1)}},A=()=>{let s=[...n];switch(i&&(s=s.filter(a=>a.name.toLowerCase().includes(i.toLowerCase()))),o!=="all"&&(s=s.filter(a=>a.industry===o)),c!=="all"&&(s=s.filter(a=>a.size===c)),d){case"name":s.sort((a,t)=>a.name.localeCompare(t.name));break;case"rating":s.sort((a,t)=>t.overall_rating-a.overall_rating);break;case"reviews":s.sort((a,t)=>t.review_count-a.review_count);break;case"recent":s.sort((a,t)=>new Date(t.updated_at).getTime()-new Date(a.updated_at).getTime());break}j(s)},E=s=>{p(`/company/${s}`)},T=s=>Array.from({length:5},(a,t)=>e.jsx(U,{className:`w-4 h-4 ${t<Math.floor(s)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},t));return f?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/3 mx-auto mb-8"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,a)=>e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},a))})]})})}):x?e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error Loading Companies"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-blue-600 to-green-500 text-white px-6 py-2 rounded-lg font-medium hover:shadow-lg transition-all duration-300",children:"Try Again"})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Company Directory"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Explore ",n.length.toLocaleString()," companies and their workplace reviews"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:i,onChange:s=>y(s.target.value),placeholder:"Search companies...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:d,onChange:s=>S(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"reviews",children:"Most Reviewed"}),e.jsx("option",{value:"rating",children:"Highest Rated"}),e.jsx("option",{value:"name",children:"Alphabetical"}),e.jsx("option",{value:"recent",children:"Recently Updated"})]}),e.jsxs("button",{onClick:()=>C(!g),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"Filters"})]})]}),g&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Industry"}),e.jsx("select",{value:o,onChange:s=>N(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:_.map(s=>e.jsx("option",{value:s==="All Industries"?"all":s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Size"}),e.jsx("select",{value:c,onChange:s=>w(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:k.map(s=>e.jsx("option",{value:s==="All Sizes"?"all":s,children:s},s))})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold",children:l.length})," of"," ",e.jsx("span",{className:"font-semibold",children:n.length})," companies"]})}),l.length===0?e.jsxs("div",{className:"text-center bg-white p-12 rounded-lg shadow-sm",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No companies found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>e.jsxs("button",{onClick:()=>E(s.id),className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 p-6 text-left group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors mb-1",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center space-x-1",children:[e.jsx(h,{className:"w-3 h-3"}),e.jsx("span",{children:s.industry})]})]}),e.jsx(D,{className:"w-5 h-5 text-green-500"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"flex items-center space-x-1",children:T(s.overall_rating)}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:s.overall_rating.toFixed(1)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.review_count," reviews"]})]}),e.jsxs("div",{className:"text-green-600 font-medium",children:[s.recommendation_rate,"% recommend"]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx("p",{className:"text-xs text-gray-500",children:s.size})})]},s.id))}),l.length>0&&e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing all ",l.length," companies"]})})]})})};export{q as default};
